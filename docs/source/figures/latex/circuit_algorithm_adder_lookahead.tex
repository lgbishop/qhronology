\documentclass{article}
\pagenumbering{gobble}
\input{./../../preamble/header.tex}
\input{./../../preamble/macros.tex}

\usepackage{geometry}
\geometry{
paperwidth=18cm,
paperheight=6cm,
margin=0cm
}

\usepackage{amsmath,amsfonts,amssymb}
\usepackage{bm}
\usepackage{tikz}
\usetikzlibrary{arrows,decorations.markings}
\usetikzlibrary{shapes}
\usetikzlibrary{quantikz}
%\usetikzlibrary{quantikz2}
\begin{document}
\begin{quantikz}[row sep={0.5*\QuantikzSeparationRow cm}]%[transparent]
    \lstick{$\ket{c_0}$} & \qw\gategroup[4,steps=3,style={thin,rounded corners,fill=none, inner xsep=2pt},background]{CARRY} & \qw & \ctrl{2} & \qw & \qw & \qw & \qw & \qw & \qw & \qw & \ctrl{2}\gategroup[4,steps=3,style={thin,rounded corners,fill=none, inner xsep=2pt},background]{ANTICARRY} & \qw & \qw & \qw\gategroup[3,steps=2,style={thin,rounded corners,fill=none, inner xsep=2pt},background]{SUM} & \ctrl{2} & \qw \rstick{$\ket{c_0}$} \\
    \lstick{$\ket{x_0}$} & \ctrl{1} & \ctrl{1} & \qw & \qw & \qw & \qw & \qw & \qw & \qw & \qw & \qw & \ctrl{1} & \ctrl{1} & \ctrl{1} & \qw & \qw \rstick{$\ket{x_0}$} \\
    \lstick{$\ket{y_0}$} & \ctrl{1} & \targ{} & \ctrl{1} & \qw & \qw & \qw & \qw & \qw & \qw & \qw & \ctrl{1} & \targ{} & \ctrl{1} & \targ{} & \targ{} & \qw \rstick{$\ket{s_0 = x_0 \oplus y_0 \oplus c_0}$} \\[0.25*\QuantikzSeparationRow cm]
    \lstick{$\ket{c_1}$} & \targ{} & \qw & \targ{} & \push{\;c^\prime_1\;} & \qw\gategroup[4,steps=3,style={thin,rounded corners,fill=none, inner xsep=2pt},background]{CARRY} & \qw & \ctrl{2} & \qw & \qw\gategroup[3,steps=2,style={thin,rounded corners,fill=none, inner xsep=2pt},background]{SUM} & \ctrl{2} & \targ{} & \qw & \targ{} & \qw & \qw & \qw \rstick{$\ket{c_1}$} \\
    \lstick{$\ket{x_1}$} & \qw & \qw & \qw & \qw & \ctrl{1} & \ctrl{1} & \qw & \ctrl{1} & \ctrl{1} & \qw & \qw & \qw & \qw & \qw & \qw & \qw \rstick{$\ket{x_1}$} \\
    \lstick{$\ket{y_1}$} & \qw & \qw & \qw & \qw & \ctrl{1} & \targ{} & \ctrl{1} & \targ{} & \targ{} & \targ{} & \qw & \qw & \qw & \qw & \qw & \qw \rstick{$\ket{s_1 = x_1 \oplus y_1 \oplus c^\prime_1}$} \\
    \lstick{$\ket{0}$} & \qw & \qw & \qw & \qw & \targ{} & \qw & \targ{} & \qw & \qw & \qw & \qw & \qw & \qw & \qw & \qw & \qw \rstick{$\ket{c^\prime_2}$}
\end{quantikz}
\end{document}
